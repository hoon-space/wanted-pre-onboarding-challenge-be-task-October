
## 4. 주력언어인 Javascript의 설계적 결함

### this의 동작문제

내부 함수에서 사용되는 this는 window 객체를 참조한다는 점이다. 

간단한 예시를 들어보자. 
```
window.count = 100
const Obj = {
    count: 1,
    fun1(){
        this.count++
        console.log('this value from add1 : ', this.count)

        const fun2 = function () {
            this.count++
            console.log('this value from add2 : ', this.count)
        }
        fun2()
    }
}
```

```
this value from fun1 :  2
this value from fun2 :  102
```
Obj.fun1()의 출력 결과는 위와 같다. 일반적인 프로그래밍 언어에서 합리적인 기대는 2와 3이다. 이는 JS의 this가 내부함수에서 사용되면 window객체의 값을 읽기 때문이다. 

만약 window.count를 선언, 할당하지 않는다면 fun2의 this 값은 NaN이 나온다. 

이는 JS의 태생적 결함으로 꼽히는 문제이다.