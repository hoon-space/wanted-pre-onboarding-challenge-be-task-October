## 브라우저 작동

웹 브라우저 주소창에 '네이버'를 입력하게 되면 브라우저는 네이버 홈페이지로 연결해 화면을 출력하게 된다. 내부적 작동 과정을 알아보자.

### 개괄

먼저 브라우저 주소창에 www.naver.com 이란 도메인 주소를 입력하게 되면 네이버 홈페이지가 바로 출력된다. 만약 주소창에 한글로 '네이버'를 입력하게 되면 구글이나 파이어폭스같은 검색엔진은 이를 검색 쿼리로 인식해 '네이버'를 검색한 결과를 화면에 출력한다.  

사용자가 '네이버'를 검색한 결과 화면에서 '네이버'를 클릭하게 되면 웹 브라우저는 웹 서버에 네이버 웹 페이지란 자원을 요청하게 되고 서버는 이에 대한 응답으로 요청한 자원을 보낸다. 브라우저는 이를 해석하여 화면에 출력하는 것이다.

그럼 자원이란 무엇일까? 주로 HTML, CSS 파일이다. 브라우저는 정확하게는 W3C에서 정한 명세에 따라 HTML 파일을 해석해 화면에 보여준다. 자원은 HTML 뿐 아니라 PDF, 이미지, 오디오 등 다른 형태일 수도 있다. 
<br>
<br>
### 브라우저 엔진과 렌더링 엔진
좀 더 구체적으로 들어가보자. 

사용자의 요청이 발생하면 이에 대해 브라우저 엔진과 렌더링 엔진이 동작을 제어하고 http 같은 통신을 통해 백엔드에서 자원을 받아오게 된다.

브라우저 엔진은 사용자와 렌더링 엔진 사이의 동작을 제어하면서 data storage를 참조하여 로컬에 데이트를 읽고 쓰는 역할을 한다.

렌더링 엔진은 요청받은 내용을 화면에 표시하는 핵심 역할을 수행한다. 즉, 웹 서버로부터 응답 받은 HTML, 이미지같은 자원을 파싱하여 화면에 표시하게 된다. 모질라의 게코(Gecko)나 애플이 주도하는 웹킷(Webkit)같은 엔진들이 렌더링 엔진이다. 

렌더링 엔진은 파서를 통해 문서를 파싱하고 DOM 노드로 변환한 다음 트리를 생성하고 화면에 배치하게 된다. 

<br>
<br> 

### 네트워크 통신 

렌더링 엔진이 웹 서버와 통신하는 과정을 좀 더 살펴보면 다음과 같다. 

ip 주소나 도메인 네임을 목적지로 자원을 요청하게 되면 http같은 정해진 통신 규약(프로토콜)로 네트워크 전송 층에서 통신이 일어나게 된다. 

서브넷과 라우터를 거친 요청 메시지가 목적지인 '네이버'(www.naver.com)을 찾아가고 네이버 서버가 응답 데이터를 보내는 것이다. 이때 네이버 ip주소(125.209.222.141)라면 그 목적지로 바로 갈 것이고 도메인 이름인 naver.com을 주소창에 입력하거나 '네이버'를 검색해 클릭한 경우 DNS(Domain Name System)를 거치게 된다. 그 도메인 주소에 해당하는 ip 주소를 DNS데이터베이스 시스템에서 찾아 요청을 전달하게 된다.

만약 최종 웹서버까지 연결되기 전에 지리적으로 분산된 캐싱 기능을 하는 CDN(Content Delivery Network)이 설정되어 있다면 이를 거치게 되고 만약 CDN에 캐싱된 데이터라면 최종 서버까지 요청이 가지 않고 CDN에서 데이터를 보내준다. 만약 CDN에 저장된 컨텐츠가 아니라면 최종 웹서버로 요청이 전달되고 웹서버는 요청받은 자원을 전송하게 된다. 

