## Q1. 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

### A1. 파이썬은 GIL, MySQL은 InnoDB Lock 쿼리문을 이용한다.

MySQL을 통해 정합성을 유지하면서 동시성을 높인다.

MySQL InnoDB 엔진의 경우 상황에 따른 여러가지 락(Lock)을 통해서 동시정을 제어 할 수 있다. 이를 통해 사용자가 설정한 대로 원하는 수준의 트랜잭션 격리(Transaction Isolation level) 수준을 유지할 수 있다.

## 트렌잭션 격리 수준이란?
Thread에서 공유 자원에 동시 접근을 제한하기 위해 Lock을 걸듯이 DB에서도 트랜잭션들 간에 같은 동일한 데이터에 대한 동시 접근을 제한하기 위하여 Lock을 설정할 수 있다. Lock을 건다는 것은 그만큼 동시처리량이 줄어든다는 의미이기 때문에 과도하게 사용하면 성능에 문제가 생길 수 있다. 따라서 상황별로 꼭 필요한 수준의 Lock을 걸어서 정합성을 유지하고 최대한의 성능을 내기 위해서는 동시성 이슈가 발생할 수 있는 상황들을 정확히 정의


MySQL InnoDB 엔진은 사용자가 필요에 따라 명시적으로 locking read를 할 수 있도록 두가지 쿼리를 제공한다.

• 한 트랜잭션에서 읽어간 데이터를 다른 트랜잭션에서 배타적으로 수정하기 위해 락을 획득하려 할때 (읽어가는 것은 허용) 기다리게 만들고 싶다면
`SELECT ... LOCK IN SHARE MODE` 사용

• 한 트랜잭션에서 읽어간 데이터를 다른 트랜잭션에서 배타적으로 읽거나 수정하기 위해 락을 획득하려 할 때 기다리게 만들고 싶다면 
`SELECT ... FOR UPDATE` 사용

• EX) 특정 필드의 값을 읽어온 후 (SELECT), 해당 값을 1 증가시켜서 저장(UPDATE)하고 싶을때 이 경우 SELECT ... FOR UPDATE를 사용하지 않으면, 여러 트랜잭션이 동시에 접근할 경우 정상 동작 하지 않을 수 있다 즉, 트랜잭션 2개가 실행되었는데 값이 2만큼 증가되지 않고 1만 증가되어있을 가능성이 존재.
